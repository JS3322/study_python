Document update = Document.parse(
    "{ '$set': { 'Result.ResourceSvrDisk_SumValue': { " +
    "'$cond': { " +
    "   'if': { '$isArray': '$Resource.data.disks' }, " +
    "   'then': { " +
    "       '$reduce': { " +
    "           'input': '$Resource.data.disks', " +
    "           'initialValue': 0, " +
    "           'in': { '$add': ['$$value', '$$this.size'] } " +
    "       } " +
    "   }, " +
    "   'else': '$Resource.data.disks.size' " +
    "} " +
    "} }"
);